webpackJsonp([1],{"+3M4":function(e,t){},HRWJ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"index",data:()=>({export_current:!1,export_current_name:null,modify_current:!1,delete_current:!1,delete_current_name:null,save_data:!1,save_file_name:null,init_module_type:"NO",module_type:null,module_data:null,module_data_list:[],add_attr:!1,attr_key:null,attr_value:null,add_cite:!1,cite_type:null,cite_key:null}),methods:{funDownload(e,t){var a=document.createElement("a");a.download=t,a.style.display="none";var n=new Blob([e]);a.href=URL.createObjectURL(n),document.body.appendChild(a),a.click(),document.body.removeChild(a)},data_conversion(value_string){let new_value;try{try{new_value=eval("("+value_string.toString().replace(/(^\s*)|(\s*$)/g,"").replace(/\n|\r/g,"").replace(/^\"|\"$/gim,"").replace(/^\'|\'$/gim,"")+")")}catch(e){new_value=value_string.toString().replace(/(^\s*)|(\s*$)/g,"").replace(/\n|\r/g,"")}}catch(e){alert("赋值失败"),new_value=null,console.error(e)}return new_value},clear_fn(){this.attr_key=null,this.attr_value=null,this.add_attr=!1,this.cite_type=null,this.cite_key=null,this.add_cite=!1},add_module_fn(){this.clear_fn(),this.add_attr=!0},add_cite_fn(){this.clear_fn(),this.add_cite=!0},affirm_attr_fn(){let e=this.data_conversion(this.attr_value);if(null!==e){switch(this.module_type){case"object":this.$set(this.module_data,this.data_conversion(this.attr_key),e);break;case"array":this.module_data.push(e)}this.clear_fn()}else this.add_attr=!1},affirm_cite_fn(){try{if("object"===this.cite_type){let e={};e[this.cite_key.toString()]=Object.assign({},this.module_data),this.module_data=e,this.module_type="object"}else{let e=[this.module_data];this.module_data=e,this.module_type="array"}this.clear_fn()}catch(e){this.add_cite=!1,alert("索引失败"),console.error(e)}},confirm_save_fn(){const e=this,t={file_name:e.save_file_name,save_data:e.module_data};this.$http.post("/save_data",t).then(function(t){e.get_list_fn(),e.save_data=!1,alert("数据更新成功")})},modify_current_fn(e){const t=document.getElementsByClassName("mainCenter_textarea_code")[0],a=document.getElementsByClassName("mainCenter_textarea_modify")[0];if("修改当前"===e.currentTarget.textContent)a.value=t.textContent,this.modify_current=!0,e.currentTarget.textContent="保存修改";else{let t=this.data_conversion(a.value);if("string"==typeof t)return alert("赋值失败");if(t.length>=0)this.module_data=t,this.module_type="array";else{for(let e in t)t.hasOwnProperty(e)&&this.$set(this.module_data,e,t[e]);this.module_type="object"}this.modify_current=!1,e.currentTarget.textContent="修改当前"}},show_details_fn(e){this.save_file_name=e.file_name,this.module_data=e.save_data,this.module_type="object"},get_list_fn(){const e=this;localStorage.token&&this.$http.post("/data_list",{}).then(function(t){e.module_data_list=[],t.data.content.forEach(function(t){e.module_data_list.push(t)})})},export_data_fn(){const e=this;this.module_data_list.forEach(function(t){if(t.file_name===e.export_current_name.replace(".json",""))return e.funDownload(JSON.stringify(t.save_data),e.export_current_name),e.export_current=!1,alert("导出文件成功"),!0})},delete_data_fn(){const e=this,t=e.delete_current_name.replace(".json","");this.module_data_list.forEach(function(a,n){if(t===a.file_name)return e.$http.post("./delete_data",{file_name:t}).then(function(t){e.module_data_list.splice(n,1),e.delete_current_name=null,e.delete_current=!1,alert("删除文件成功")}),!0})}},watch:{module_type(e){if(null===this.module_data&&"NO"===this.init_module_type){switch(e){case"object":this.module_data={};break;case"array":this.module_data=[]}this.init_module_type="YES"}}},mounted(){this.get_list_fn()}}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IvJb"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("C7Lr")({name:"App"},r,!1,function(e){a("QKJg")},null,null).exports,i=a("zO6J"),s={name:"login_index",data:()=>({enroll:!1,user_id:"",user_password:""}),methods:{login_fn(){const e=this;if(!e.user_id||!e.user_password)return alert("信息输入错误");this.$http.get("/login",{params:{user_id:e.user_id,user_password:e.user_password}}).then(function(t){t.data.content.length?(localStorage.token=t.data.token,e.$router.push({name:"index"})):alert("找不到该信息")})},add_fn(){const e=this;if(!e.user_id||!e.user_password)return alert("信息输入错误");this.$http.get("/add_user",{params:{user_id:e.user_id,user_password:e.user_password}}).then(function(t){e.user_id=null,e.user_password=null,alert("添加用户完成")})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login_div_wrap"},[a("main",{staticClass:"loginWrap_main"},[a("form",{attrs:{autocomplete:"on"}},[a("fieldset",[a("legend",[e._v("登陆信息")]),e._v(" "),a("label",{attrs:{for:"user_id"}},[e._v("帐号：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user_id,expression:"user_id"}],attrs:{id:"user_id",placeholder:"请输入帐号"},domProps:{value:e.user_id},on:{input:function(t){t.target.composing||(e.user_id=t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"user_password"}},[e._v("密码：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user_password,expression:"user_password"}],attrs:{type:"password",id:"user_password",placeholder:"请输入密码"},domProps:{value:e.user_password},on:{input:function(t){t.target.composing||(e.user_password=t.target.value)}}}),e._v(" "),a("button",{on:{click:function(t){return t.preventDefault(),e.login_fn(t)}}},[e._v("登陆")]),e._v(" "),a("button",{on:{click:e.add_fn}},[e._v("注册")])])])])])},staticRenderFns:[]};var l=a("C7Lr")(s,_,!1,function(e){a("yCqZ")},"data-v-4a0aaf78",null).exports,d=a("HRWJ"),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"index_div_wrap"},[e.save_data||e.delete_current||e.export_current?a("article",{staticClass:"indexWrap_div_hint row"},[e.save_data?a("input",{directives:[{name:"model",rawName:"v-model",value:e.save_file_name,expression:"save_file_name"}],attrs:{placeholder:"输入文件名"},domProps:{value:e.save_file_name},on:{input:function(t){t.target.composing||(e.save_file_name=t.target.value)}}}):e._e(),e._v(" "),e.save_data?a("p",{on:{click:function(t){return t.preventDefault(),e.confirm_save_fn(t)}}},[e._v("确认保存")]):e._e(),e._v(" "),e.delete_current?a("input",{directives:[{name:"model",rawName:"v-model",value:e.delete_current_name,expression:"delete_current_name"}],attrs:{list:"exports",placeholder:"选择文件"},domProps:{value:e.delete_current_name},on:{input:function(t){t.target.composing||(e.delete_current_name=t.target.value)}}}):e._e(),e._v(" "),e.delete_current?a("p",{on:{click:function(t){return t.preventDefault(),e.delete_data_fn(t)}}},[e._v("确认删除")]):e._e(),e._v(" "),e.export_current?a("input",{directives:[{name:"model",rawName:"v-model",value:e.export_current_name,expression:"export_current_name"}],attrs:{list:"exports",placeholder:"选择文件"},domProps:{value:e.export_current_name},on:{input:function(t){t.target.composing||(e.export_current_name=t.target.value)}}}):e._e(),e._v(" "),e.export_current?a("p",{on:{click:function(t){return t.preventDefault(),e.export_data_fn(t)}}},[e._v("确认导出")]):e._e()]):e._e(),e._v(" "),!e.module_type||e.add_attr||e.add_cite?a("article",{staticClass:"indexWrap_div_add row"},[e.module_type?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.module_type,expression:"module_type"}],attrs:{list:"contents",placeholder:"首页结构"},domProps:{value:e.module_type},on:{input:function(t){t.target.composing||(e.module_type=t.target.value)}}}),e._v(" "),e.add_attr?a("div",["object"===e.module_type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.attr_key,expression:"attr_key"}],attrs:{placeholder:"属性名称"},domProps:{value:e.attr_key},on:{input:function(t){t.target.composing||(e.attr_key=t.target.value)}}}):e._e(),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.attr_value,expression:"attr_value"}],attrs:{placeholder:"object"===e.module_type?"属性赋值":"项目赋值"},domProps:{value:e.attr_value},on:{input:function(t){t.target.composing||(e.attr_value=t.target.value)}}}),e._v(" "),a("p",{on:{click:function(t){return t.preventDefault(),e.affirm_attr_fn(t)}}},[e._v("确认信息")])]):e._e(),e._v(" "),e.add_cite?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.cite_type,expression:"cite_type"}],attrs:{list:"contents",placeholder:"索引类型"},domProps:{value:e.cite_type},on:{input:function(t){t.target.composing||(e.cite_type=t.target.value)}}}),e._v(" "),"object"===e.cite_type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.cite_key,expression:"cite_key"}],attrs:{placeholder:"索引名称"},domProps:{value:e.cite_key},on:{input:function(t){t.target.composing||(e.cite_key=t.target.value)}}}):e._e(),e._v(" "),a("p",{on:{click:function(t){return t.preventDefault(),e.affirm_cite_fn(t)}}},[e._v("确认信息")])]):e._e()]):e._e(),e._v(" "),a("main",{staticClass:"indexWrap_div_main row"},[!e.module_data||e.save_data||e.delete_current||e.export_current?e._e():a("div",{staticClass:"col-2"},["object"!==e.module_type||e.modify_current?e._e():a("p",{on:{click:function(t){return t.preventDefault(),e.add_module_fn(t)}}},[e._v("新增属性")]),e._v(" "),"array"!==e.module_type||e.modify_current?e._e():a("p",{on:{click:function(t){return t.preventDefault(),e.add_module_fn(t)}}},[e._v("新增项目")]),e._v(" "),e.module_type&&!e.modify_current?a("p",{on:{click:function(t){return t.preventDefault(),e.add_cite_fn(t)}}},[e._v("新增索引")]):e._e(),e._v(" "),!e.module_type||e.add_attr||e.add_cite?e._e():a("p",{on:{click:function(t){return t.preventDefault(),e.modify_current_fn(t)}}},[e._v("修改当前")])]),e._v(" "),a("div",{class:["wrapMain_div_center",(e.save_data||e.delete_current||e.export_current||e.add_attr||e.add_cite||e.modify_current,"col-10"),e.module_data?"next":"col-12"]},[a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.module_data&&!e.modify_current,expression:"module_data&&!modify_current"}],staticClass:"mainCenter_textarea_code",attrs:{disabled:""},domProps:{innerHTML:e._s(e.module_data)}}),e._v(" "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.module_data&&e.modify_current,expression:"module_data&&modify_current"}],staticClass:"mainCenter_textarea_modify"})])]),e._v(" "),e._m(0),e._v(" "),a("datalist",{attrs:{id:"exports"}},e._l(e.module_data_list,function(t,n){return a("option",{key:n,domProps:{value:t.file_name+".json"}},[e._v("\n            "+e._s(t.file_name+".json")+"\n        ")])}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("datalist",{attrs:{id:"contents"}},[t("option",{attrs:{value:"object"}},[this._v("离散")]),this._v(" "),t("option",{attrs:{value:"array"}},[this._v("线性")])])}]};var c=function(e){a("+3M4")},p=a("C7Lr")(d.a,u,!1,c,"data-v-8a4cb65c",null).exports;n.a.use(i.a);var m=new i.a({routes:[{path:"/login",name:"login",component:l},{path:"/",name:"index",component:p}]}),v=a("aozt");const f=a.n(v).a.create({baseURL:"http://localhost:3000/api",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}});f.interceptors.request.use(function(e){return e.baseURL="http://120.79.241.216:3000/api","get"===e.method&&(e.method="post",e.data=e.params),e.params={token:localStorage.token},e},function(e){return Promise.reject(e)}),f.interceptors.response.use(function(e){return e},function(e){if(e.response)switch(e.response.status){case 401:location.href="#/login"}return Promise.reject(e.response.data)});var h={install(e){e.prototype.$http=f}};n.a.config.productionTip=!1,n.a.use(h),new n.a({el:"#app",router:m,components:{App:o},template:"<App/>",mounted(){var e,t,a,n,r;e=document,t=window,a=e.documentElement,n="orientationchange"in window?"orientationchange":"resize",r=function(){var e=a.clientWidth;e&&(e>750&&(e=750),a.style.fontSize=e/320*10+"px")},e.addEventListener&&(t.addEventListener(n,r,!1),e.addEventListener("DOMContentLoaded",r,!1))}})},QKJg:function(e,t){},yCqZ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.95fb6d38ac8069deee90.js.map